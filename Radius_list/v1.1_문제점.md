## Postgis 사용 중 postgresql_db저장된 개수와 장고웹에서 보여지는 개수가 다름

- 데이터 정합성 차원에서 확인 결과
docker 상 장고웹에선 데이터 518개

postgresql 내부에서는 데이터 377개

무엇이 문제인지 확인

> 포트 충돌의 함정
> 프로그램끼리 대화할 때는 **'포트(Port)'**라는 문을 사용
> Local DB(PostgreSQL) 5432 포트사용
> Docker DB >> Docker 설정을 5432

포트 충돌로 인해 Local DB 는 옛날 데이터를 보게되었다.
도커(Docker)와 로컬(Local)은 완전히 남남으로 확실하게 구분하자

가상환경을 실제 환경과 동일하다고 착각하여, 당연히 달라야 정상인 두개의 DB 를 비교하였다

---

## 카카오맵API 의 한계

1. 한 다이소 지점에서 한 카테고리(예: 카페) 당 가져올 수 있는 데이터는 최대 15개로 제한되어 있습니다

> API 요청 파라미터 설정 (size 제한)

- **카카오 로컬 API에서 (시스템상)한번의 요청에 최대 15개만 가져올 수 있게 되어있다.**

```
params = {
    "category_group_code": cat_code,
    "x": daiso_x,
    "y": daiso_y,
    "radius": 1000, 
    "size": 15   # <--- 핵심 한계
}
```
---

## 카카오맵API 의 한계를 쪼개기 방법으로 회피

> 일단 서울에 있는 모든 다이소에 대해서 다이소 전수조사를 하였습니다.

> 당연히 3페이지 제한, 페이지당 15개로 제한이 되어있지만 쪼개기로 약 260개 정도의 데이터 확보에 성공했습니다.

**다이소는 어떻게 다 찾았나?**

**다이소 수집 성공 이유 (지역 쪼개기):**

- "서울 다이소"라고 한 번에 검색하지 않았습니다.

- "강남구 다이소", "서초구 다이소"... 이렇게 25번 쪼개서 검색했습니다.

- 강남구 안에 다이소가 45개(3페이지)를 넘지 않기 때문에 누락 없이 다 가져올 수 있었습니다.

주변 찾기 실패 이유 (반경 내 밀집도):

"강남본점 다이소 반경 1km 편의점"을 검색하면, API는 중심점 기준으로 가장 가까운 순서대로 데이터를 줍니다.

문제는 서울 강남역 반경 1km 안에 편의점이 100개가 넘는다는 것입니다.

카카오 API는 **"45등까지만 보여줄게. 46등부터는 안 보여줘(페이지 없음)"**라고 딱 잘라버립니다.

"강남구"처럼 지역을 나눌 수도 없고, 오직 "반경(Radius)" 조건만 있기 때문에 45개 이상의 데이터를 가져올 방법이 막히는 것입니다.

---

## 또 맞이한 한계(API 요청 제한) 1번 방법 응용으로(쪼개기) 주변 편의점, 카페 찾기는 실패

**주변 찾기 실패 이유 (반경 내 밀집도):**

 "강남본점 다이소 반경 1km 편의점"을 검색하면, API는 중심점 기준으로 가장 가까운 순서대로 데이터를 줍니다.

 문제는 서울 강남역 반경 1km 안에 편의점이 100개가 넘는다는 것입니다.

 카카오 API는 **"45등까지만 보여줄게. 46등부터는 안 보여줘(페이지 없음)"**라고 딱 잘라버립니다.

 "강남구"처럼 지역을 나눌 수도 없고, 오직 "반경(Radius)" 조건만 있기 때문에 45개 이상의 데이터를 가져올 방법이 막히는 것입니다.