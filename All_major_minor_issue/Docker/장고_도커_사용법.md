### 장고에서 도커 사용  <실행: docker-compose up --build>

1. 폴더 임의 생성
```
mkdir django-docker
cd django-docker
```

2. Django 프로젝트 생성 (로컬에서) / Django 컨테이너 표준 구조
```
python -m venv venv
venv\Scripts\activate
pip install django
django-admin startproject config .
```

3. requirements.txt 만들기
```
pip freeze > requirements.txt
```

4. Dockerfile 작성 (핵심)
```
FROM python:3.12-slim

# 출력 버퍼링 끄기
ENV PYTHONUNBUFFERED=1

# 작업 디렉토리
WORKDIR /app

# 의존성 설치
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# 프로젝트 코드 복사
COPY . .

# 서버 실행
CMD ["python", "manage.py", "runserver", "0.0.0.0:8000"]
```

5. docker-compose.yml 작성
```
version: "3.9"

services:
  web:
    build: .
    ports:
      - "8000:8000"
    volumes:
      - .:/app
```
- ports → 내 PC 8000 ↔ 컨테이너 8000
- volumes → 코드 수정하면 컨테이너 재빌드 없이 즉시 반영

6. settings.py
```
ALLOWED_HOSTS = ["*"]
```
(Docker에서는 필수로 모두 허용해야함)

7. **Docker로 Django 실행**
```
docker-compose up --build
```

---
8. (.env 보안적용 깃허브)
```
pip install python-dotenv
pip freeze > requirements.txt
```
9. .env 파일 만들기
```
DEBUG=True
SECRET_KEY=django-secret-key-change-me
ALLOWED_HOSTS=localhost,127.0.0.1
```

10. .gitignore에 .env 추가

.env

11. settings.py 파일에서 설정

config/settings.py  상단에 추가
```
import os
from pathlib import Path
from dotenv import load_dotenv

BASE_DIR = Path(__file__).resolve().parent.parent

load_dotenv(BASE_DIR / ".env")

SECRET_KEY = os.getenv("SECRET_KEY")

DEBUG = os.getenv("DEBUG") == "True"

ALLOWED_HOSTS = os.getenv("ALLOWED_HOSTS").split(",")
```

12. docker-compose.yml 수정 (.env 만 추가)
```
version: "3.9"

services:
  web:
    build: .
    ports:
      - "8000:8000"
    volumes:
      - .:/app
    env_file:
      - .env
```

