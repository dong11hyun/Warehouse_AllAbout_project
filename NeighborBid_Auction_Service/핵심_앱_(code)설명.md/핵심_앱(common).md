# 📂 Common App Structure & Logic

프로젝트의 핵심 정체성인 **'지역 기반 서비스'**를 가능하게 하는 기초 데이터와 공통 기능을 담당하는 `common` 앱입니다.

---

## 1. 데이터 구조 및 핵심 로직 (Models)
이 앱의 존재 이유이자, 다른 모든 앱(`users`, `auctions`)이 참조하는 기준 데이터들을 정의합니다.

### `models.py`
* **`Region` 모델 (지역 정보)**
    * **[핵심] 재귀적 구조 (Self-referencing)**: `parent` 필드가 자기 자신(`self`)을 참조하도록 설계되었습니다.
        * *코드*: `models.ForeignKey('self', ...)`
        * *기능*: '서울(1단계) > 중구(2단계) > 봉래동(3단계)'과 같은 **계층형 트리 구조(Tree Structure)**를 DB에 구현합니다.
        * *활용*: 이 구조 덕분에 상위 지역을 선택했을 때 하위 동네들을 모두 포함하여 검색하는 로직(내 동네 확장)이 가능해집니다.
    * **`depth`**: 현재 지역이 시/도인지, 동/읍/면인지 단계를 구분합니다.

* **`Category` 모델 (카테고리)**
    * **`slug`**: URL에 한글 카테고리 이름이 지저분하게 들어가는 것을 방지하고, 검색 엔진 최적화(SEO)나 깔끔한 주소 처리를 위해 사용됩니다.

* **`Notification` 모델 (알림)**
    * 경매 낙찰, 상위 입찰 발생 시 사용자에게 보낼 알림을 저장합니다.
    * **`link`**: 알림 클릭 시 해당 경매 페이지(`/auction/5/` 등)로 바로 이동할 수 있도록 URL을 함께 저장합니다.
    * **`is_read`**: 사용자가 알림을 확인했는지 여부를 관리합니다.

---

## 2. 관리자 페이지 설정 (Admin) 🛠️
복잡한 계층형 데이터를 관리자가 쉽게 조작할 수 있도록 돕습니다.

### `admin.py`
* **`RegionAdmin`**
    * 지역 데이터는 양이 많으므로, `depth`(단계)별로 필터링(`list_filter`)해서 볼 수 있도록 설정했습니다.
* **`CategoryAdmin`**
    * **`prepopulated_fields`**: 관리자가 카테고리 이름을 입력하면, 자동으로 `slug` 필드가 채워지도록 자동화했습니다.

---

## 3. 앱 설정 (Configuration) ⚙️

### `apps.py`
* **`CommonConfig`**: 앱의 이름을 `common`으로 등록합니다.

---

## 4. 아직 비어있는 파일들 (Empty Files) 📝

* **`views.py`**: 현재 비어있습니다.
    * *추후 제안*: 프론트엔드(JavaScript)에서 지역 선택 박스를 동적으로 채우기 위한 API (예: '서울' 선택 시 '구' 목록 반환) 로직이 이곳에 추가될 수 있습니다.
* **`tests.py`**: 현재 비어있습니다.
    * *추후 제안*: `Region` 모델의 부모-자식 관계가 올바르게 연결되는지 확인하는 테스트가 필요할 수 있습니다.

---

## 💡 요약: 이 앱이 중요한 이유

이 앱은 겉으로 드러나는 기능은 적지만, 프로젝트의 **확장성**을 담당합니다.

1.  **`Region` 모델**: 단순한 텍스트로 주소를 저장하는 것이 아니라, **관계형 데이터**로 저장함으로써 "내 주변 5km", "우리 구 전체"와 같은 정교한 **위치 기반 필터링**을 가능하게 하는 기반입니다.
2.  **`Notification` 모델**: 실시간 경매 시스템에서 사용자 경험(UX)을 높여주는 필수 기능(놓친 입찰 알림 등)을 담당합니다.