
```
================================================================================
                🏛️  NEIGHBORBID HYBRID ARCHITECTURE  🏛️
================================================================================

                           [ 📱 사용자 (Clients) ]
                                    │
        ┌───────────────────────────┴───────────────────────────┐
        │ (1) HTTP 요청                                         │ (2) WebSocket 연결
        │ (로그인, 동네거래, 결제)                                │ (전국 실시간 경매)
        ▼                                                       ▼
+----------------------------------------------------------------------------------+
|                            [ NGINX (Gateway) ]                                   |
|   - URL이 /ws/ 로 시작?  ------------------------------------> (ASGI로 보냄)      |
|   - 그 외 일반 요청?      ------------------------------------> (WSGI로 보냄)      |
+----------------------------------------------------------------------------------+
        │                                                       │
        ▼                                                       ▼
+-----------------------+                         +------------------------------+
| [ WSGI Server ]       |                         | [ ASGI Server ]              |
| (Gunicorn)            |                         | (Daphne / Uvicorn)           |
|                       |                         |                              |
|   Django (일반 View)   |                         |   Django (Consumers)         |
| "안정성 중심"          |                         | "속도 중심 (Turbo)"           |
+-----------------------+                         +------------------------------+
        │                                                       │
        │ (3) 트랜잭션 (직접 저장)                                 │ (4) 메모리 연산 (초고속)
        ▼                                                       ▼
+-----------------------+                         +------------------------------+
| [ PostgreSQL (DB) ]   |                         | [ Redis (Memory) ]           |
|                       |                         |                              |
| - 유저/결제 데이터      |                         | - 실시간 호가(Price) 저장     |
| - 일반 경매 데이터      |                         | - Pub/Sub (방송 송출)        |
|                       |                         +------------------------------+
+-----------------------+                                       │
        ▲                                                       │
        │                                                       │ (5) 비동기 저장 요청
        │                                                       ▼
        │                                         +------------------------------+
        │                                         | [ Celery Worker ]            |
        │            (6) 지연 저장 (Write-Back)     |                              |
        └─────────────────────────────────────────| - 1초마다 DB에 몰아서 저장      |
                                                  | - 경매 종료 처리               |
                                                  +------------------------------+

```


[ 🚀 NeighborBid 개발 진행표 ]

✅ Phase 0. 기본 기능 구현 (완료)
   - 회원가입, 로그인, 일반 경매(CRUD), 지갑 기능

✅ Phase 1. 인프라 & 환경 설정 (방금 완료! 🐳)
   - Docker 도입 (Redis + Django 한방 실행)
   - Channels 설정 (ASGI 모드 전환)
   - 협업 환경 통일

✅ Phase 2. 데이터 구조 잡기 (NOW 🔥)
   - DB에 '전국 실시간' 여부 표시 (is_national)
   - 폼/뷰 수정하여 구분 처리

✅ Phase 3. 웹소켓 백엔드 구현 (Next)
   - Consumer 작성 (소켓 접속/해제)
   - Redis 연동 (실시간 메시지 방송)

✅ Phase 4. 프론트엔드 연동 (Final)
   - JavaScript로 소켓 연결
   - 실시간 호가 업데이트 화면 구현


. 데이터 흐름 상세 (Data Flow)
초보자도 이해하기 쉽게 **"우체통(일반)"**과 **"단톡방(실시간)"**으로 비유하여 설명합니다.

🐢 Track A: 일반 동네 경매 (is_national = False)
비유: 우체통에 편지를 넣고 답장을 기다리는 방식 📮 (상대방의 새 소식을 보려면 우체통을 열어봐야 함 = 새로고침 필요)

요청 (Request): 사용자가 [입찰] 버튼을 누릅니다.

전송 (Send): 브라우저가 서버(WSGI)에게 "10,000원 입찰할게요!"라는 편지(HTTP POST)를 보냅니다.

처리 (Process): Django View가 편지를 읽고, DB 장부에 "철수가 10,000원 입찰함"이라고 기록합니다.

응답 (Response): 서버가 "잘 적었습니다. 여기 업데이트된 새 페이지입니다." 하고 새로운 HTML 파일을 줍니다.

결과 (Result): 사용자의 화면이 잠시 깜빡이고, 새로운 가격이 보입니다.

⚡ Track B: 전국 실시간 경매 (is_national = True)
비유: 카카오톡 단톡방에 들어와 있는 방식 💬 (누군가 말하면 내 폰이 바로 울림 = 새로고침 없음)

연결 (Handshake):

사용자가 상세 페이지에 들어오는 순간, 브라우저와 서버(ASGI) 사이에 **전용 전화선(WebSocket)**이 연결됩니다.

서버는 이 사용자를 auction_1번방이라는 그룹(단톡방)에 초대합니다.

입찰 (Send):

User A가 [입찰] 버튼을 누르면, 자바스크립트가 전화선으로 "10,000원요!" 하고 속삭입니다. (새로고침 X)

방송 (Publish):

서버(Consumer)는 이걸 DB에 저장하고, **Redis(방송실)**에게 "1번방 사람들한테 10,000원이라고 소리쳐!"라고 명령합니다.

수신 (Subscribe):

Redis는 1번방에 연결된 모든 사용자(User A, B, C...)에게 동시에 메시지를 뿌립니다.

업데이트 (Update):

각 사용자의 브라우저는 메시지를 받자마자, 자바스크립트가 점수판 숫자만 싹 바꿉니다. (부드러운 화면 전환)